<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Card with Login Modal and Navigation Bar</title>
    <style>
        /* Add the provided CSS styles here */
        body {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            font-family: arial;
        }

        .navbar {
            background-color: #333;
            color: #fff;
            display: flex;
            justify-content: center;
            padding: 10px;
        }

        .navbar a {
            color: #fff;
            text-decoration: none;
            padding: 10px;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 20px;
            flex: 1;
        }

        .container .card {
            position: relative;
        }

        .container .card .face {
            width: 300px;
            height: 200px;
            transition: .4s;
        }

        .container .card .face.face1 {
            position: relative;
            background: #63696f;
            display: flex;
            justify-content: center;
            align-content: center;
            align-items: center;
            z-index: 1;
            transform: translateY(100px);
        }

        .container .card:hover .face.face1 {
            transform: translateY(0);
            box-shadow:
                inset 0 0 60px whitesmoke,
                inset 10px 0 30px rgb(132, 164, 164),
                inset -10px 0 80px rgb(217, 255, 0),
                inset 10px 0 100px rgb(132, 164, 164),
                inset -10px 0 100px rgb(172, 151, 105),
                0 0 50px #fff,
                -10px 0 80px rgb(132, 164, 164),
                10px 0 80px rgb(172, 151, 105);
        }

        .container .card .face.face1 .content {
            opacity: .2;
            transition: 0.5s;
            text-align: center;
        }

        .container .card .face.face1 .content i {
            font-size: 3em;
            color: white;
            display: inline-block;
        }

        .container .card .face.face1 .content h3 {
            font-size: 1em;
            color: white;
            text-align: center;
        }

        .container .card .face.face1 .content a {
            transition: .5s;
        }

        .container .card .face.face2 {
            position: relative;
            background: whitesmoke;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-sizing: border-box;
            box-shadow: 0 20px 50px rgba(0, 0, 0, .8);
            transform: translateY(-100px);
        }


        /* Style the login modal */
        .login-modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1;
            /* Bring the login modal to the front */
        }

        .login-modal h2 {
            margin: 0;
            padding-bottom: 10px;
            border-bottom: 1px solid #ccc;
        }

        .login-modal form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .login-modal input[type="text"],
        .login-modal input[type="password"] {
            padding: 5px;
            border: 1px solid #ccc;
        }

        .login-modal button {
            padding: 5px 10px;
            background: #333;
            color: #fff;
            border: none;
            cursor: pointer;
        }

        /* Show the login modal on button click */
        .container .card .login-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #333;
            color: #fff;
            padding: 5px 10px;
            border: none;
            cursor: pointer;
            font-size: 14px;
        }

        /* Footer styles */
        .footer {
            background-color: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
        }
    </style>

<body>
    <div class="navbar">
        <a href="#">Home</a>
        <a href="#">About</a>
        <a href="#">Contact</a>
        <button class="login-btn">Login</button>
    </div>

    <div class="container" id="cardContainer">
        <!-- Cards will be dynamically added here -->
    </div>

    <!-- Login Modal -->
    <div class="login-modal" id="loginModal">
        <h2>Login</h2>
        <form id="loginForm">
            <!-- Accept either email or username -->
            <label for="identifier">Email or Username:</label>
            <input type="text" id="identifier" name="identifier" required>

            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required>

            <button type="submit" id="loginButton">Login</button>
        </form>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>&copy; 2023 My Website. All rights reserved.</p>
    </div>

    <script>

        
        // Add event listener to the form submit event
        const cardContainer = document.getElementById('cardContainer');

        const createCard = (data) => {
            const cardElement = document.createElement('div');
            cardElement.className = 'card';

            const cardContent = `
        <div class="face face1">
          <div class="content">
            <h3>${data.name}</h3>
            <p>Availability: ${data.availability ? 'Available' : 'Not Available'}</p>
          </div>
        </div>
        <div class="face face2">
          <div class="content">
            <!-- Add other card content here using the data object -->
          </div>
        </div>
      `;

            cardElement.innerHTML = cardContent;
            cardContainer.appendChild(cardElement);
        };

        // Fetch data from the API server
        fetch('/api/workspace/')
            .then(response => response.json())
            .then(data => {
                // Loop through the data and create cards
                data.forEach(item => {
                    createCard(item);
                });
            })
            .catch(error => console.error('Error fetching data:', error));
    </script>

    <script>
        // Get the login modal and close button
        const loginModal = document.querySelector(".login-modal");
        const closeBtn = document.querySelector(".close-btn");

        // Get all login buttons
        const loginButtons = document.querySelectorAll(".login-btn");

        // Add event listener to each login button to toggle the login modal
        loginButtons.forEach((button) => {
            button.addEventListener("click", () => {
                loginModal.style.display = loginModal.style.display === "block" ? "none" : "block";
            });
        });

        // Close the login modal when the close button is clicked
        closeBtn.addEventListener("click", () => {
            loginModal.style.display = "none";
        });

        // Close the login modal when the user clicks outside of it
        window.addEventListener("click", (event) => {
            if (event.target === loginModal) {
                loginModal.style.display = "none";
            }
        });

    </script>
    <script>

        // Function to handle form submission
        const handleFormSubmit = async (event) => {
            event.preventDefault();

            const form = document.getElementById('loginForm');
            const formData = new FormData(form);

            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    body: formData,
                });

                if (!response.ok) {
                    // Handle login error
                    const errorData = await response.json();
                    console.error('Login Error:', errorData.error);
                    alert('Invalid email or password. Please try again.');
                } else {
                    // Login successful, get the JWT token from the response
                    const data = await response.json();
                    const token = data.token;
                    // Store the token in local storage or as a cookie
                    localStorage.setItem('token', token);
                    // Redirect the user to the desired page
                    window.location.href = '/dashboard'; // Change to your desired URL
                }
            } catch (error) {
                console.error('Error logging in:', error);
                alert('An error occurred. Please try again later.');
            }
        };
    </script>
</body>

</html>